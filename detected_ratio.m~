function [ output_args ] = detected_ratio( state, N )
%DETECTED_RATIO Summary of this function goes here
%   Detailed explanation goes here
    gt_table = load('gtSeq1.mat');
    gt_frames_FromRight = gt_table.new_marbles_comingFromRight;
    gt_frames_FromLeft = gt_table.new_marbles_comingFromLeft;
  
    detected_count = 0;
    count_total = 0;
    
    for i = 1 : 71
        for marblenum=1:size(new_marbles_comingFromRight,2)       % loop over the individual marbles coming from the right
            frameList=new_marbles_comingFromRight(marblenum).frame_numbers(:);  % set of frame this marble appears in
            if ~isempty(frameList)
                last_frame=max(frameList);
                first_frame=min(frameList);
                for frame=first_frame:last_frame   % loop over all frames in list
                    index_a=find(frameList(:)==frame); % get index in full framelist for current frame
                    numdetects(marblenum)=numdetects(marblenum)+1;
                    gt_cr=new_marbles_comingFromRight(marblenum).row_of_centers(index_a); % x left most pixel
                    gt_cc=new_marbles_comingFromRight(marblenum).col_of_centers(index_a); % y of left most pixel
                    if frame == i
                        dist_gt_det= sqrt((gt_cc-state(i).x)^2+(gt_cr-state(i).y)^2); %calculate the distance
                        if dist_gt_det <= 10
                            detected_count = detected_count + 1; %increase by 1 if the detected marble is within 10 pixels
                        end
                        count_total = count_total + 1; %increase by 1 everytime a marble is detected
                    end
                    
                end
            end
        end
        
        
        for marblenum=1:size(new_marbles_comingFromLeft,2)       % loop over the individual marbles coming from the right
            frameList=new_marbles_comingFromRight(marblenum).frame_numbers(:);  % set of frame this marble appears in
            if ~isempty(frameList)
                last_frame=max(frameList);
                first_frame=min(frameList);
                for frame=first_frame:last_frame   % loop over all frames in list
                    index_a=find(frameList(:)==frame); % get index in full framelist for current frame
                    numdetects(marblenum)=numdetects(marblenum)+1;
                    gt_cr=new_marbles_comingFrom(marblenum).row_of_centers(index_a); % x left most pixel
                    gt_cc=new_marbles_comingFromRight(marblenum).col_of_centers(index_a); % y of left most pixel
                    if frame == i
                        dist_gt_det= sqrt((gt_cc-state(i).x)^2+(gt_cr-state(i).y)^2); %calculate the distance
                        if dist_gt_det <= 10
                            detected_count = detected_count + 1; %increase by 1 if the detected marble is within 10 pixels
                        end
                        count_total = count_total + 1; %increase by 1 everytime a marble is detected
                    end
                    
                end
            end
        end
    end


end

